{# templates/partials/flash_messages.html #}
{% set map = {"error": "danger"} %}
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="flash-container" role="status" aria-live="polite">
      {% for category, message in messages %}
        {% set cat = map.get(category, category) %}
        <div class="alert alert-{{ cat }}">
          <span class="alert-text">{{ message }}</span>
          <button class="alert-close" aria-label="Fechar">&times;</button>
        </div>
      {% endfor %}
    </div>
    <script>
      // botÃ£o fechar + auto esconder depois de 6s
      document.querySelectorAll('.alert').forEach(a=>{
        a.querySelector('.alert-close')?.addEventListener('click', ()=>a.remove());
        setTimeout(()=>a.remove(), 6000);
      });
    </script>
  {% endif %}
{% endwith %}